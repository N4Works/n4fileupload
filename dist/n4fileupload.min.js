"use strict";!function(n){n.module("n4FileUpload",["n4FileUpload.services","n4FileUpload.directives"])}(angular),function(n){n.module("n4FileUpload.directives",["n4FileUpload.services"]).directive("n4FileUploadDirective",["$timeout","n4FileUploadService","$q","$log",function(n,e,i,l){return{require:"ngModel",restrict:"AE",replace:!0,transclude:!0,scope:{endpoint:"@",onStart:"&",onProgress:"=",onFinish:"&"},template:['<label class="bt">','  <span ng-transclude=""></span>','  <input class="bt-input" type="file"/>',"</label>"].join(""),link:function(n,t,o,r){var a=t.find("input");o.multiple&&a.attr("multiple","multiple"),n.files=[],a.on("change",function(o){n.onStart(),t.addClass("sending"),a.prop("disabled",!0);for(var s,u=[],d=o.target.files,p=d.length-1;p>=0;p-=1)n.files.push(d[p]),s=e.send(d[p],n.endpoint).then(null,function(n){l.error(n)},function(e){var i=e.config.file;i.progress=parseInt(100*e.loaded/e.total,10),n.onProgress&&n.onProgress(i)}),u.push(s);i.all(u).then(function(n){var e=n.map(function(n){return n.data[0]});r.$setViewValue(e)})["finally"](function(){t.removeClass("sending"),a.prop("disabled",!1),n.onFinish()})}),n.$on("$destroy",function(){a.off("change")})}}}])}(angular),function(n){n.module("n4FileUpload.services",["ngFileUpload"]).provider("n4FileUploadService",function(){var n=this;this.endpoint="",this.$get=["Upload",function(e){return{send:function(i,l){return e.upload({url:l||n.endpoint,file:i})}}}]})}(angular);