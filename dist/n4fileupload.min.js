"use strict";!function(e){e.module("n4FileUpload",["n4FileUpload.services","n4FileUpload.directives"])}(angular),function(e){e.module("n4FileUpload.directives",["n4FileUpload.services"]).directive("n4FileUploadDirective",["$timeout","n4FileUploadService","$q","$log",function(e,n,i,l){return{require:"ngModel",restrict:"AE",replace:!0,transclude:!0,scope:{onStart:"&",onFinish:"&"},template:["<div>",'  <label class="bt">','    <span ng-transclude=""></span>','    <input class="bt-input" type="file"/>',"  </label>",'  <ul class="files">','    <li ng-repeat="file in files">','      <span ng-bind="file.name"></span>','      <span ng-bind="file.progress"></span>',"    </li>","  <ul>","</div>"].join(""),link:function(e,t,a,s){var o=t.find("input");a.multiple&&o.attr("multiple","multiple"),t.find("label").addClass(a["class"]),t.removeClass(),e.files=[],o.on("change",function(a){e.onStart(),t.addClass("sending"),o.prop("disabled",!0);for(var r,d=[],u=a.target.files,p=u.length-1;p>=0;p-=1)e.files.push(u[p]),r=n.send(u[p]).then(null,function(e){l.error(e)},function(e){var n=e.config.file;n.progress=parseInt(100*e.loaded/e.total,10)+"%"}),d.push(r);i.all(d).then(function(e){var n=e.map(function(e){return e.data[0]});s.$setViewValue(n)})["finally"](function(){t.removeClass("sending"),o.prop("disabled",!1),e.onFinish()})}),e.$on("$destroy",function(){o.off("change")})}}}])}(angular),function(e){e.module("n4FileUpload.services",["ngFileUpload"]).provider("n4FileUploadService",function(){var e=this;this.endpoint="",this.$get=["Upload",function(n){return{send:function(i,l){return n.upload({url:l||e.endpoint,file:i})}}}]})}(angular);