"use strict";!function(n){n.module("n4FileUpload",["n4FileUpload.services","n4FileUpload.directives"])}(angular),function(n){n.module("n4FileUpload.directives",["n4FileUpload.services"]).directive("n4FileUploadDirective",["$timeout","n4FileUploadService","$q","$log",function(n,e,i,l){return{require:"ngModel",restrict:"AE",replace:!0,transclude:!0,scope:{onStart:"&",onFinish:"&"},template:["<div>",'  <label class="bt">','    <span ng-transclude=""></span>','    <input class="bt-input" type="file"/>',"  </label>",'  <ul class="files">','    <li ng-repeat="file in files">','      <span ng-bind="file.name"></span>','      <span ng-bind="file.progress"></span>',"    </li>","  <ul>","</div>"].join(""),link:function(n,t,a,o){var s=t.find("input");a.multiple&&s.attr("multiple","multiple"),n.files=[],s.on("change",function(a){n.onStart(),t.addClass("sending"),s.prop("disabled",!0);for(var r,u=[],d=a.target.files,p=d.length-1;p>=0;p-=1)n.files.push(d[p]),r=e.send(d[p]).then(null,function(n){l.error(n)},function(n){var e=n.config.file;e.progress=parseInt(100*n.loaded/n.total,10)+"%"}),u.push(r);i.all(u).then(function(n){var e=n.map(function(n){return n.data[0]});o.$setViewValue(e)})["finally"](function(){t.removeClass("sending"),s.prop("disabled",!1),n.onFinish()})}),n.$on("$destroy",function(){s.off("change")})}}}])}(angular),function(n){n.module("n4FileUpload.services",["ngFileUpload"]).provider("n4FileUploadService",function(){var n=this;this.endpoint="",this.$get=["Upload",function(e){return{send:function(i,l){return e.upload({url:l||n.endpoint,file:i})}}}]})}(angular);