!function(e){"use strict";e.module("n4FileUpload",["n4FileUpload.services","n4FileUpload.directives"])}(angular),function(e){"use strict";e.module("n4FileUpload.directives",["n4FileUpload.services"]).directive("n4FileUpload",["$timeout","n4FileUploadService","$q","$log",function(e,n,i,t){return{require:"ngModel",restrict:"AE",replace:!0,transclude:!0,scope:{endpoint:"@",onStart:"&",onProgress:"=",onFinish:"&"},template:['<label class="bt">','  <span ng-transclude=""></span>','  <input class="bt-input" type="file"/>',"</label>"].join(""),link:function(e,l,o,r){var s=l.find("input");o.multiple&&s.attr("multiple","multiple"),e.files=[],s.on("change",function(o){e.onStart(),l.addClass("sending"),s.prop("disabled",!0);for(var a,u=[],d=o.target.files,c=d.length-1;c>=0;c-=1)e.files.push(d[c]),a=n.send(d[c],e.endpoint).then(null,function(e){t.error(e)},function(n){var i=n.config.file;i.progress=parseInt(100*n.loaded/n.total,10),e.onProgress&&e.onProgress(i)}),u.push(a);i.all(u).then(function(e){try{var n=e.map(function(e){return e.data[0]});r.$setViewValue(n)}catch(i){t.error(i),r.$setViewValue(e)}})["finally"](function(){l.removeClass("sending"),s.prop("disabled",!1),e.onFinish()})}),e.$on("$destroy",function(){s.off("change")})}}}])}(angular),function(e){"use strict";e.module("n4FileUpload.services",["ngFileUpload"]).provider("n4FileUploadService",function(){var e=this;this.endpoint="",this.$get=["Upload",function(n){return{send:function(i,t){return n.upload({url:t||e.endpoint,file:i})}}}]})}(angular);